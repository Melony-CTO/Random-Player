<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ğŸµ Melony ëœë¤ ìŒì•… í”Œë ˆì´ì–´</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 40px; }
    audio { width: 300px; margin-top: 20px; }
    button { margin-top: 20px; padding: 10px 20px; }
  </style>
</head>
<body>
  <h2 id="trackTitle">ğŸµ Melony ëœë¤ ìŒì•… í”Œë ˆì´ì–´</h2>
  <audio id="player" controls>
    <source id="source" src="" type="audio/mpeg">
    ë¸Œë¼ìš°ì €ê°€ ì˜¤ë””ì˜¤ íƒœê·¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
  </audio>
  <br>
  <button id="toggleAuto">ìë™ì¬ìƒ OFF</button>

  <script>
const tracks = [
  { id: 1, file: "00C1. Sunday Letters M.mp3", title: "Sunday Letters" },
  { id: 2, file: "00C10. If I Had Said It.mp3", title: "If I Had Said It" },
  { id: 3, file: "00C12. Did You Know I Loved You-M.mp3", title: "Did You Know I Loved You" },
  { id: 4, file: "00C13. Falling in Between - M.mp3", title: "Falling in Between" },
  { id: 5, file: "00C14. The Way We Pause â€“ M.mp3", title: "The Way We Pause" },
  { id: 6, file: "00C15. Shared Mornings.mp3", title: "Shared Mornings" },
  { id: 7, file: "00C16. We Never Said Goodbyeâ€“ M.mp3", title: "We Never Said Goodbye" },
  { id: 8, file: "00C17. Echoes Between Us-M.mp3", title: "Echoes Between Us" },
  { id: 9, file: "00C18. Close Enought.mp3", title: "Close Enought" },
  { id: 10, file: "00C19. If I'm in Your Day.mp3", title: "If I'm in Your Day" },
  { id: 11, file: "00C2. Told with Eyes M.mp3", title: "Told with Eyes" },
  { id: 12, file: "00C20. Steps Between the Silence-M.mp3", title: "Steps Between the Silence" },
  { id: 13, file: "00C3. Midnight Between Us-M.mp3", title: "Midnight Between Us" },
  { id: 14, file: "00C4. Tilted Heartbeat-M.mp3", title: "Tilted Heartbeat" },
  { id: 15, file: "00C5. Steps That MatchM.mp3", title: "Steps That Match" },
  { id: 16, file: "00C6. Letters in the Rain-M.mp3", title: "Letters in the Rain" },
  { id: 17, file: "00C7. Half a Step Behind-M.mp3", title: "Half a Step Behind" },
  { id: 18, file: "00C8. Almost Something-M.mp3", title: "Almost Something" },
  { id: 19, file: "00C9. Quiet Like a Song-M.mp3", title: "Quiet Like a Song" },
  { id: 20, file: "00D1-Only in My Mind.mp3", title: "Only in My Mind" },
  { id: 21, file: "00D2-What If We Stayed.mp3", title: "What If We Stayed" },
  { id: 22, file: "00D3-Every Time I Almost Spoke.mp3", title: "Every Time I Almost Spoke" },
  { id: 23, file: "00D4-Wish I Said Your Name.mp3", title: "Wish I Said Your Name" },
  { id: 24, file: "00D5-Lines I Never Crossed.mp3", title: "Lines I Never Crossed" },
  { id: 25, file: "00D6-What You Didnâ€™t Say.mp3", title: "What You Didnâ€™t Say" },
  { id: 26, file: "00c11. If You Were Me-M.mp3", title: "If You Were Me" }
];


    let recent = [];
    const recentLimitMinutes = 30;
    const autoPlayToggle = document.getElementById("toggleAuto");
    let autoPlay = true;

    const player = document.getElementById("player");
    const source = document.getElementById("source");
    const title = document.getElementById("trackTitle");

    function saveRecent(id) {
      const now = Date.now();
      recent.push({ id, time: now });
      // ìµœê·¼ 30ë¶„ ì´ë‚´ ì¬ìƒ ê¸°ë¡ë§Œ ìœ ì§€
      recent = recent.filter(r => now - r.time <= recentLimitMinutes * 60 * 1000);
    }

    function pickRandomTrack() {
      const available = tracks.filter(t => !recent.some(r => r.id === t.id));
      if (available.length === 0) {
        // ë‹¤ ì¬ìƒí–ˆìœ¼ë©´ ê¸°ë¡ ì´ˆê¸°í™”
        recent = [];
        return pickRandomTrack();
      }
      const index = Math.floor(Math.random() * available.length);
      return available[index];
    }

    function loadTrack(track) {
      title.innerText = "ğŸµ " + track.title;
      source.src = track.file;
      player.load();
      if (autoPlay) {
        player.play();
      }
      saveRecent(track.id);
    }

    // ì´ˆê¸° ë¡œë“œ
    const firstTrack = pickRandomTrack();
    loadTrack(firstTrack);

    // ì¬ìƒ ì¢…ë£Œ ì‹œ ìƒˆ ëœë¤ ê³¡
    player.addEventListener("ended", () => {
      const nextTrack = pickRandomTrack();
      loadTrack(nextTrack);
    });

    // ìë™ì¬ìƒ í† ê¸€
    autoPlayToggle.addEventListener("click", () => {
      autoPlay = !autoPlay;
      autoPlayToggle.innerText = autoPlay ? "ìë™ì¬ìƒ OFF" : "ìë™ì¬ìƒ ON";
    });
  </script>
</body>
</html>
