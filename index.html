<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ğŸµ Melony ìˆœì°¨ ìŒì•… í”Œë ˆì´ì–´</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            padding: 40px;
        }
        #trackTitle {
            margin-bottom: 10px; /* ê¸°ì¡´ í•˜ë‹¨ ì—¬ë°± */
            font-size: 1.5em;
            text-align: center; /* í…ìŠ¤íŠ¸ ë‚´ìš© ê°€ìš´ë° ì •ë ¬ */
            margin: 0 auto 10px auto; /* ë¸”ë¡ ìš”ì†Œ ê°€ìš´ë° ì •ë ¬ + í•˜ë‹¨ ì—¬ë°± */
            width: fit-content; /* ë‚´ìš©ë¬¼ ë„ˆë¹„ë§Œí¼ë§Œ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • (margin autoë¥¼ ìœ„í•´ í•„ìš”) */
        }

        .controls-wrapper {
            margin-top: 20px;
            display: flex;
            flex-direction: column; /* ìˆ˜ì§ ë°°ì¹˜ */
            align-items: center; /* ì»¨íŠ¸ë¡¤ ë˜í¼ ìì²´ë¥¼ ê°€ìš´ë° ì •ë ¬ */
            gap: 10px; /* ê° ìš”ì†Œ ê°„ê²© */
        }

        .custom-controls {
            display: flex;
            gap: 10px;
            justify-content: center; /* ë²„íŠ¼ ê·¸ë£¹ ë‚´ë¶€ì˜ ë²„íŠ¼ë“¤ì„ ê°€ìš´ë° ì •ë ¬ */
        }

        .custom-controls button,
        #toggleAuto {
            padding: 12px 25px;
            font-size: 16px;
            min-width: 120px;
            cursor: pointer;
        }
    </style>
    </head>
<body>
    <h2 id="trackTitle">ğŸµ Melony ìˆœì°¨ ìŒì•… í”Œë ˆì´ì–´</h2>
    <audio id="player" playsinline>
        <source id="source" src="" type="audio/mpeg">
        ë¸Œë¼ìš°ì €ê°€ ì˜¤ë””ì˜¤ íƒœê·¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </audio>

    <div class="controls-wrapper">
        <div class="custom-controls">
            <button id="playPauseButton">ì¬ìƒ</button>
            <button id="nextButton">ë‹¤ìŒ ê³¡</button>
        </div>
        <button id="toggleAuto">ìë™ì¬ìƒ OFF</button>
    </div>

    <script>
const tracks = [
    { file: "00C1. Sunday Letters M.mp3", title: "Sunday Letters" },
    { file: "00C1. Sunday Letters_remake.mp3", title: "Sunday Letters (Remake_Ver)" },
    { file: "00C10. If I Had Said It.mp3", title: "If I Had Said It" },
    { file: "00C10. If I Had Said It_remake.mp3", title: "If I Had Said It (Remake_Ver)" },
    { file: "00C11. If You Were Me-M.mp3", title: "If You Were Me" },
    { file: "00C12. Did You Know I Loved You-M.mp3", title: "Did You Know I Loved You" },
    { file: "00C12. Did You Know I Loved You_remake.mp3", title: "Did You Know I Loved You (Remake_Ver)" },
    { file: "00C13. Falling in Between - M.mp3", title: "Falling in Between" },
    { file: "00C13. Falling in Between_remake.mp3", title: "Falling in Between (Remake_Ver)" },
    { file: "00C14. The Way We Pause â€“ M.mp3", title: "The Way We Pause" },
    { file: "00C14. The Way We Pause_remake.mp3", title: "The Way We Pause (Remake_Ver)" },
    { file: "00C15. Shared Mornings.mp3", title: "Shared Mornings" },
    { file: "00C15. Shared Mornings_remake.mp3", title: "Shared Mornings (Remake_Ver)" },
    { file: "00C16. We Never Said Goodbyeâ€“ M.mp3", title: "We Never Said Goodbye" },
    { file: "00C16. We Never Said Goodbye_remake.mp3", title: "We Never Said Goodbye (Remake_Ver)" },
    { file: "00C17. Echoes Between Us-M.mp3", title: "Echoes Between Us" },
    { file: "00C18. Close Enought.mp3", title: "Close Enough" },
    { file: "00C18. Close Enought_remake.mp3", title: "Close Enough (Remake_Ver)" },
    { file: "00C19. If I'm in Your Day.mp3", title: "If I'm in Your Day" },
    { file: "00C19. If I'm in Your Day_remake.mp3", title: "If I'm in Your Day (Remake_Ver)" },
    { file: "00C2. Told with Eyes M.mp3", title: "Told with Eyes" },
    { file: "00C2. Told with Eyes _remake.mp3", title: "Told with Eyes (Remake_Ver)" },
    { file: "00C20. Steps Between the Silence-M.mp3", title: "Steps Between the Silence" },
    { file: "00C20. Steps Between the Silence_remake.mp3", title: "Steps Between the Silence (Remake_Ver)" },
    { file: "00C3. Midnight Between Us-M.mp3", title: "Midnight Between Us" },
    { file: "00C3. Midnight Between Us-M_remake.mp3", title: "Midnight Between Us (Remake_Ver)" },
    { file: "00C4. Tilted Heartbeat-M.mp3", title: "Tilted Heartbeat" },
    { file: "00C4. Tilted Heartbeat_remake.mp3", title: "Tilted Heartbeat (Remake_Ver)" },
    { file: "00C5. Steps That MatchM.mp3", title: "Steps That Match" },
    { file: "00C5. Steps That Match_remake.mp3", title: "Steps That Match (Remake_Ver)" },
    { file: "00C6. Letters in the Rain-M.mp3", title: "Letters in the Rain" },
    { file: "00C6. Letters in the Rain_remake.mp3", title: "Letters in the Rain (Remake_Ver)" },
    { file: "00C7. Half a Step Behind-M.mp3", title: "Half a Step Behind" },
    { file: "00C7. Half a Step Behind_remake.mp3", title: "Half a Step Behind (Remake_Ver)" },
    { file: "00C8. Almost Something-M.mp3", title: "Almost Something" },
    { file: "00C8. Almost Something_remake.mp3", title: "Almost Something (Remake_Ver)" },
    { file: "00C9. Quiet Like a Song-M.mp3", title: "Quiet Like a Song" },
    { file: "00C9. Quiet Like a Song_remake.mp3", title: "Quiet Like a Song (Remake_Ver)" },
    { file: "00D1-Only in My Mind.mp3", title: "Only in My Mind" },
    { file: "00D1. Only in My Mind_remake.mp3", title: "Only in My Mind (Remake_Ver)" },
    { file: "00D2-What If We Stayed.mp3", title: "What If We Stayed" },
    { file: "00D2. What If We Stayed_remake.mp3", title: "What If We Stayed (Remake_Ver)" },
    { file: "00D3-Every Time I Almost Spoke.mp3", title: "Every Time I Almost Spoke" },
    { file: "00D3. Every Time I Almost Spoke_remake.mp3", title: "Every Time I Almost Spoke (Remake_Ver)" },
    { file: "00D4-Wish I Said Your Name.mp3", title: "Wish I Said Your Name" },
    { file: "00D4. Wish I Said Your Name_remake.mp3", title: "Wish I Said Your Name (Remake_Ver)" },
    { file: "00D5-Lines I Never Crossed.mp3", title: "Lines I Never Crossed" },
    { file: "00D5. Lines I Never Crossed_remake.mp3", title: "Lines I Never Crossed (Remake_Ver)" },
    { file: "00D6-What You Didnâ€™t Say.mp3", title: "What You Didn't Say" },
    { file: "00D6. What You Didnâ€™t Say_reamke.mp3", title: "What You Didn't Say (Remake_Ver)" },
    { file: "00E1. Somewhere You Still Wait for Me_M.m4a", title: "Somewhere You Still Wait for Me" },
    { file: "00E2. Before the Rain Forgets_M.m4a", title: "Before the Rain Forgets" },
    { file: "00E3. The Rain Remembers My Name_M.m4a", title: "The Rain Remembers My Name" },
    { file: "00E4. The Silence That Tasted Like Rain_M.m4a", title: "The Silence That Tasted Like Rain" },
    { file: "00E5. When the Rain Forgot to Fall_M.m4a", title: "When the Rain Forgot to Fall" },
    { file: "00E6. How We Fell Apart Without Falling Out_M.m4a", title: "How We Fell Apart Without Falling Out" },
    { file: "00F1. Her Rules, Her Rhythm.m4a", title: "Her Rules, Her Rhythm" },
    { file: "00F2. The Sway Between Her Heartbeats_M.m4a", title: "The Sway Between Her Heartbeats" },
    { file: "00F3. Second Glance.m4a", title: "Second Glance" },
    { file: "00F4. The Sky Remembers You Softly_M.m4a", title: "The Sky Remembers You Softly" },
    { file: "00F5. Cigarette Waltz_M.m4a", title: "Cigarette Waltz" },
    { file: "00F6. Rooms We Never Touched_M.m4a", title: "Rooms We Never Touched" }
];

let currentIndex = 0; // ìˆœì°¨ ì¬ìƒì´ë¯€ë¡œ ì„ì¸ ë°°ì—´ ëŒ€ì‹  ì›ë˜ tracks ë°°ì—´ì˜ ì¸ë±ìŠ¤ ì‚¬ìš©
let autoPlay = true;

const player = document.getElementById("player");
const source = document.getElementById("source");
const trackTitleDisplay = document.getElementById("trackTitle");
const playPauseButton = document.getElementById("playPauseButton");
const nextButton = document.getElementById("nextButton");
const autoPlayToggle = document.getElementById("toggleAuto");

// --- ì…”í”Œ ê´€ë ¨ í•¨ìˆ˜ ì œê±° ---
// function shuffleArray(array) { ... }

function loadTrack(index) {
    // ìˆœì°¨ ì¬ìƒì´ë¯€ë¡œ tracks ë°°ì—´ì„ ì§ì ‘ ì‚¬ìš©
    const track = tracks[index]; 
    if (!track) {
        // ëª¨ë“  ê³¡ ì¬ìƒì´ ëë‚œ ê²½ìš° (loop)
        currentIndex = 0; // ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘
        loadTrack(currentIndex);
        return;
    }

    trackTitleDisplay.innerText = "ğŸµ " + track.title;
    source.src = track.file;
    // M4A íŒŒì¼ íƒ€ì… ëª…ì‹œ (ì„ íƒ ì‚¬í•­, ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ì¸ì‹í•˜ëŠ” ê²½ìš°ê°€ ë§ìŒ)
    // if (track.file.endsWith('.m4a')) {
    //     source.type = 'audio/mp4';
    // } else {
    //     source.type = 'audio/mpeg';
    // }
    player.load();
    playPauseButton.innerText = player.paused ? "ì¬ìƒ" : "ì¼ì‹œì •ì§€";

    if (autoPlay) {
        player.play().catch(error => {
            console.warn("Autoplay was prevented:", error);
            playPauseButton.innerText = "ì¬ìƒ"; // ìë™ ì¬ìƒ ì‹¤íŒ¨ ì‹œ ì¬ìƒ ë²„íŠ¼ìœ¼ë¡œ í‘œì‹œ
        });
    }
}

function playNextTrack() {
    currentIndex++;
    if (currentIndex >= tracks.length) { // tracks ë°°ì—´ì˜ ëì— ë„ë‹¬í–ˆëŠ”ì§€ í™•ì¸
        currentIndex = 0; // ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘
    }
    loadTrack(currentIndex);
}

document.addEventListener("DOMContentLoaded", () => {
    // ì…”í”Œ ë¡œì§ ì œê±°, ë°”ë¡œ ì²« ê³¡ ë¡œë“œ
    currentIndex = 0;
    loadTrack(currentIndex); 
});

player.addEventListener("ended", playNextTrack); // ê³¡ì´ ëë‚˜ë©´ ë‹¤ìŒ ê³¡ ì¬ìƒ

playPauseButton.addEventListener("click", () => {
    if (player.paused) {
        player.play().catch(error => console.warn("Play attempt failed:", error));
    } else {
        player.pause();
    }
});

nextButton.addEventListener("click", playNextTrack); // ë‹¤ìŒ ê³¡ ë²„íŠ¼ í´ë¦­ ì‹œ

autoPlayToggle.addEventListener("click", () => {
    autoPlay = !autoPlay;
    autoPlayToggle.innerText = autoPlay ? "ìë™ì¬ìƒ OFF" : "ìë™ì¬ìƒ ON";
    if (autoPlay && player.paused) {
        player.play().catch(error => console.warn("Autoplay toggle play prevented:", error));
    }
});

player.addEventListener("play", () => {
    playPauseButton.innerText = "ì¼ì‹œì •ì§€";
});

player.addEventListener("pause", () => {
    playPauseButton.innerText = "ì¬ìƒ";
});

player.addEventListener('error', (e) => {
    let errorMessage = "ì˜¤ë””ì˜¤ ì¬ìƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
    if (e.target.error.code === 4) {
        errorMessage = "ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ë¸Œë¼ìš°ì €ê°€ ì§€ì›í•˜ì§€ ì•ŠëŠ” í˜•ì‹ì…ë‹ˆë‹¤.";
    }
    trackTitleDisplay.innerText = "ğŸš¨ ì˜¤ë¥˜: " + errorMessage;
    player.pause();
    playPauseButton.innerText = "ì¬ìƒ";
    console.error("Audio error:", e.target.error); // ê°œë°œì ë„êµ¬ì— ë” ìƒì„¸í•œ ì—ëŸ¬ ì¶œë ¥
});
    </script>
<footer style="margin-top:40px;padding:15px;background:#f7f7f7;border-top:1px solid #ddd;font-size:0.9em;color:#555;text-align:center;line-height:1.5;">
    â“’ Melony. All rights reserved.<br>
    ğŸµ ë³¸ í˜ì´ì§€ì—ì„œ ì¬ìƒë˜ëŠ” ëª¨ë“  ìŒì•…ì˜ ì €ì‘ê¶Œì€ <strong>Melony</strong>ì—ê²Œ ìˆìœ¼ë©°,<br>
    ìƒì—…ì  ì´ìš©ê³¼ ë¬´ë‹¨ ë³µì œë¥¼ ê¸ˆí•˜ë©°<br>
    ê°œì¸ì ì¸ ê°ìƒ ëª©ì ì— í•œí•´ ììœ ë¡­ê²Œ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</footer>
</body>
</html>
