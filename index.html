<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ğŸµ Melony ëœë¤ ìŒì•… í”Œë ˆì´ì–´</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }
    #trackTitle {
      margin-bottom: 10px;
      font-size: 1.5em;
    }

    .controls-wrapper {
      margin-top: 20px;
      display: flex;
      flex-direction: column; /* ìˆ˜ì§ ë°°ì¹˜ */
      align-items: center; /* ê°€ìš´ë° ì •ë ¬ */
      gap: 10px; /* ê° ìš”ì†Œ ê°„ê²© */
    }

    .custom-controls {
      display: flex;
      gap: 10px;
    }

    .custom-controls button,
    #toggleAuto {
      padding: 12px 25px;
      font-size: 16px;
      min-width: 120px;
      cursor: pointer;
    }
  </style>
  <link rel="manifest" href="/manifest.json">
</head>
<body>
  <h2 id="trackTitle">ğŸµ Melony ëœë¤ ìŒì•… í”Œë ˆì´ì–´</h2>
  <audio id="player" playsinline>
    <source id="source" src="" type="audio/mpeg">
    ë¸Œë¼ìš°ì €ê°€ ì˜¤ë””ì˜¤ íƒœê·¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
  </audio>

  <div class="controls-wrapper">
    <div class="custom-controls">
      <button id="playPauseButton">ì¬ìƒ</button>
      <button id="nextButton">ë‹¤ìŒ ê³¡</button>
    </div>
    <button id="toggleAuto">ìë™ì¬ìƒ OFF</button>
  </div>

  <script>
const tracks = [
  { file: "00C1. Sunday Letters M.mp3", title: "Sunday Letters" },
  { file: "00C1. Sunday Letters_remake.mp3", title: "Sunday Letters (Remake_Ver)" },
  { file: "00C10. If I Had Said It.mp3", title: "If I Had Said It" },
  { file: "00C10. If I Had Said It_remake.mp3", title: "If I Had Said It (Remake_Ver)" },
  { file: "00C12. Did You Know I Loved You-M.mp3", title: "Did You Know I Loved You" },
  { file: "00C12. Did You Know I Loved You_remake.mp3", title: "Did You Know I Loved You (Remake_Ver)" },
  { file: "00C13. Falling in Between - M.mp3", title: "Falling in Between" },
  { file: "00C13. Falling in Between_remake.mp3", title: "Falling in Between (Remake_Ver)" },
  { file: "00C14. The Way We Pause â€“ M.mp3", title: "The Way We Pause" },
  { file: "00C14. The Way We Pause_remake.mp3", title: "The Way We Pause (Remake_Ver)" },
  { file: "00C15. Shared Mornings.mp3", title: "Shared Mornings" },
  { file: "00C15. Shared Mornings_remake.mp3", title: "Shared Mornings (Remake_Ver)" },
  { file: "00C16. We Never Said Goodbyeâ€“ M.mp3", title: "We Never Said Goodbye" },
  { file: "00C16. We Never Said Goodbye_remake.mp3", title: "We Never Said Goodbye (Remake_Ver)" },
  { file: "00C17. Echoes Between Us-M.mp3", title: "Echoes Between Us" },
  { file: "00C18. Close Enought.mp3", title: "Close Enought" },
  { file: "00C18. Close Enought_remake.mp3", title: "Close Enought (Remake_Ver)" },
  { file: "00C19. If I'm in Your Day.mp3", title: "If I'm in Your Day" },
  { file: "00C19. If I'm in Your Day_remake.mp3", title: "If I'm in Your Day (Remake_Ver)" },
  { file: "00C2. Told with Eyes M.mp3", title: "Told with Eyes" },
  { file: "00C2. Told with Eyes _remake.mp3", title: "Told with Eyes (Remake_Ver)" },
  { file: "00C20. Steps Between the Silence-M.mp3", title: "Steps Between the Silence" },
  { file: "00C20. Steps Between the Silence_remake.mp3", title: "Steps Between the Silence (Remake_Ver)" },
  { file: "00C3. Midnight Between Us-M.mp3", title: "Midnight Between Us" },
  { file: "00C3. Midnight Between Us-M_remake.mp3", title: "Midnight Between Us (Remake_Ver)" },
  { file: "00C4. Tilted Heartbeat-M.mp3", title: "Tilted Heartbeat" },
  { file: "00C4. Tilted Heartbeat_remake.mp3", title: "Tilted Heartbeat (Remake_Ver)" },
  { file: "00C5. Steps That MatchM.mp3", title: "Steps That Match" },
  { file: "00C5. Steps That Match_remake.mp3", title: "Steps That Match (Remake_Ver)" },
  { file: "00C6. Letters in the Rain-M.mp3", title: "Letters in the Rain" },
  { file: "00C6. Letters in the Rain_remake.mp3", title: "Letters in the Rain (Remake_Ver)" },
  { file: "00C7. Half a Step Behind-M.mp3", title: "Half a Step Behind" },
  { file: "00C7. Half a Step Behind_remake.mp3", title: "Half a Step Behind (Remake_Ver)" },
  { file: "00C8. Almost Something-M.mp3", title: "Almost Something" },
  { file: "00C8. Almost Something_remake.mp3", title: "Almost Something (Remake_Ver)" }
  ];

let shuffledTracks = [];
let currentIndex = 0;
let autoPlay = true;

const player = document.getElementById("player");
const source = document.getElementById("source");
const trackTitleDisplay = document.getElementById("trackTitle");
const playPauseButton = document.getElementById("playPauseButton");
const nextButton = document.getElementById("nextButton");
const autoPlayToggle = document.getElementById("toggleAuto");

function shuffleArray(array) {
  const copy = array.slice();
  for (let i = copy.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [copy[i], copy[j]] = [copy[j], copy[i]];
  }
  return copy;
}

function loadTrack(index) {
  const track = shuffledTracks[index];
  if (!track) return;

  trackTitleDisplay.innerText = "ğŸµ " + track.title;
  source.src = track.file;
  player.load();
  playPauseButton.innerText = player.paused ? "ì¬ìƒ" : "ì¼ì‹œì •ì§€";

  if (autoPlay) {
    player.play().catch(error => {
      console.warn("Autoplay was prevented:", error);
      playPauseButton.innerText = "ì¬ìƒ";
    });
  }
}

function playNextTrack() {
  currentIndex++;
  if (currentIndex >= shuffledTracks.length) {
    shuffledTracks = shuffleArray(tracks);
    currentIndex = 0;
  }
  loadTrack(currentIndex);
}

document.addEventListener("DOMContentLoaded", () => {
  shuffledTracks = shuffleArray(tracks);
  currentIndex = 0;
  loadTrack(currentIndex);
});

player.addEventListener("ended", playNextTrack);

playPauseButton.addEventListener("click", () => {
  if (player.paused) {
    player.play().catch(error => console.warn("Play attempt failed:", error));
  } else {
    player.pause();
  }
});

nextButton.addEventListener("click", playNextTrack);

autoPlayToggle.addEventListener("click", () => {
  autoPlay = !autoPlay;
  autoPlayToggle.innerText = autoPlay ? "ìë™ì¬ìƒ OFF" : "ìë™ì¬ìƒ ON";
  if (autoPlay && player.paused) {
    player.play().catch(error => console.warn("Autoplay toggle play prevented:", error));
  }
});

player.addEventListener("play", () => {
  playPauseButton.innerText = "ì¼ì‹œì •ì§€";
});

player.addEventListener("pause", () => {
  playPauseButton.innerText = "ì¬ìƒ";
});

player.addEventListener('error', (e) => {
  let errorMessage = "ì˜¤ë””ì˜¤ ì¬ìƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
  if (e.target.error.code === 4) {
    errorMessage = "ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ë¸Œë¼ìš°ì €ê°€ ì§€ì›í•˜ì§€ ì•ŠëŠ” í˜•ì‹ì…ë‹ˆë‹¤.";
  }
  trackTitleDisplay.innerText = "ğŸš¨ ì˜¤ë¥˜: " + errorMessage;
  player.pause();
  playPauseButton.innerText = "ì¬ìƒ";
});
  </script>
<footer style="margin-top:40px;padding:15px;background:#f7f7f7;border-top:1px solid #ddd;font-size:0.9em;color:#555;text-align:center;line-height:1.5;">
  â“’ Melony. All rights reserved.<br>
  ğŸµ ë³¸ í˜ì´ì§€ì—ì„œ ì¬ìƒë˜ëŠ” ëª¨ë“  ìŒì•…ì˜ ì €ì‘ê¶Œì€ <strong>Melony</strong>ì—ê²Œ ìˆìœ¼ë©°,<br>
  ìƒì—…ì  ì´ìš©ê³¼ ë¬´ë‹¨ ë³µì œë¥¼ ê¸ˆí•˜ë©°<br>
  ê°œì¸ì ì¸ ê°ìƒ ëª©ì ì— í•œí•´ ììœ ë¡­ê²Œ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</footer>
</body>
</html>

